<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¶€ì‚° ê°ˆë§·ê¸¸ 100M | ê³µì§€ì‚¬í•­</title>
    <meta name="description" content="ë¶€ì‚° ê°ˆë§·ê¸¸ 100M ëŒ€íšŒ ê³µì§€ì‚¬í•­">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <!-- Navigation -->
    <nav class="nav-desktop glass">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="assets/main_logo.png" alt="ê°ˆë§·ê¸¸ 100M" onerror="this.style.display='none'">
                <span class="gradient-text">ê°ˆë§·ê¸¸ 100M</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">í™ˆ</a></li>
                <li><a href="course.html">ì½”ìŠ¤</a></li>
                <li><a href="schedule.html">ì¼ì •</a></li>
                <li><a href="registration.html">ì°¸ê°€ì‹ ì²­</a></li>
                <li><a href="notices.html">ê³µì§€ì‚¬í•­</a></li>
                <li><a href="community.html">ì»¤ë®¤ë‹ˆí‹°</a></li>
                <li><a href="results.html">ê²°ê³¼ì¡°íšŒ</a></li>
            </ul>
            <button class="nav-hamburger">â˜°</button>
        </div>
    </nav>

    <!-- Mobile Menu -->
    <div class="mobile-menu">
        <a href="index.html">ğŸ  í™ˆ</a>
        <a href="course.html">ğŸ—ºï¸ ì½”ìŠ¤</a>
        <a href="schedule.html">ğŸ“… ì¼ì •</a>
        <a href="registration.html">ğŸ“ ì°¸ê°€ì‹ ì²­</a>
        <a href="notices.html">ğŸ“¢ ê³µì§€ì‚¬í•­</a>
        <a href="community.html">ğŸ‘¥ ì»¤ë®¤ë‹ˆí‹°</a>
        <a href="results.html">ğŸ† ê²°ê³¼ì¡°íšŒ</a>
    </div>

    <!-- Cheer Marquee -->
    <div class="cheer-marquee">
        <div class="cheer-marquee-inner marquee"></div>
    </div>

    <!-- Main Content -->
    <main style="padding-top:120px; min-height:100vh;">
        <section style="max-width:800px; margin:0 auto; padding:40px 24px;">
            <h1 style="font-size:2.5rem; text-align:center; margin-bottom:48px;" class="gradient-text">ê³µì§€ì‚¬í•­</h1>

            <div id="notices-list" style="display:flex; flex-direction:column; gap:16px;">
                <!-- Filled by JS -->
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div style="font-weight:700; color:#fff; margin-bottom:8px;">ë¶€ì‚° ê°ˆë§·ê¸¸ 100M</div>
        <div style="font-size:0.875rem;">Â© 2026 Busan Galmaetgil 100M. All rights reserved.</div>
    </footer>

    <!-- Bottom Navigation (Mobile) -->
    <nav class="bottom-nav">
        <div class="bottom-nav-inner">
            <a href="index.html"><span class="icon">ğŸ </span>í™ˆ</a>
            <a href="course.html"><span class="icon">ğŸ—ºï¸</span>ì½”ìŠ¤</a>
            <a href="schedule.html"><span class="icon">ğŸ“…</span>ì¼ì •</a>
            <a href="registration.html"><span class="icon">ğŸ“</span>ì‹ ì²­</a>
            <a href="results.html"><span class="icon">ğŸ†</span>ê²°ê³¼</a>
        </div>
    </nav>

    <!-- SOS Button -->
    <button class="sos-btn">SOS</button>

    <script src="js/app.js"></script>
    <script>
        let openNoticeId = null;

        document.addEventListener('DOMContentLoaded', async () => {
            const notices = await fetchData('getNotices');
            renderNotices(notices);
        });

        function renderNotices(notices) {
            const list = document.getElementById('notices-list');
            list.innerHTML = notices.map(notice => `
                <div class="glass-card" style="overflow:hidden;">
                    <button onclick="toggleNotice(${notice.id})" 
                            style="width:100%; padding:20px; background:none; border:none; color:#fff; 
                                   cursor:pointer; display:flex; align-items:center; gap:16px; text-align:left;">
                        <div style="flex:1;">
                            <div style="font-size:0.75rem; color:var(--slate-400); margin-bottom:4px;">${notice.date}</div>
                            <div style="font-weight:600;">${notice.title}</div>
                        </div>
                        <span id="arrow-${notice.id}" style="transition:transform 0.2s;">â–¼</span>
                    </button>
                    <div id="content-${notice.id}" style="display:none; padding:0 20px 20px; border-top:1px solid var(--slate-700);">
                        <div style="padding-top:16px; color:var(--slate-300); white-space:pre-line; line-height:1.7;">
                            ${notice.content}
                        </div>
                        ${notice.image_url ? `<img src="${notice.image_url}" style="max-width:100%; margin-top:16px; border-radius:8px;">` : ''}
                    </div>
                </div>
            `).join('');
        }

        function toggleNotice(id) {
            const content = document.getElementById(`content-${id}`);
            const arrow = document.getElementById(`arrow-${id}`);

            if (openNoticeId === id) {
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
                openNoticeId = null;
            } else {
                // Close previous
                if (openNoticeId !== null) {
                    document.getElementById(`content-${openNoticeId}`).style.display = 'none';
                    document.getElementById(`arrow-${openNoticeId}`).style.transform = 'rotate(0deg)';
                }
                // Open new
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
                openNoticeId = id;
            }
        }
    </script>
</body>

</html>