# 📖 부산 갈맷길 100M - 운영 및 유지보수 사용설명서

> **초보자를 위한 단계별 가이드** | 최종 업데이트: 2026-01-10

---

## 📋 목차

1. [시스템 개요](#1-시스템-개요)
2. [프로젝트 구조](#2-프로젝트-구조)
3. [초기 설정 가이드](#3-초기-설정-가이드)
4. [일상 운영 가이드](#4-일상-운영-가이드)
5. [콘텐츠 관리](#5-콘텐츠-관리)
6. [대회 당일 운영](#6-대회-당일-운영)
7. [문제 해결 (FAQ)](#7-문제-해결-faq)
8. [긴급 상황 대응](#8-긴급-상황-대응)

---

## 1. 시스템 개요

### 🎯 이 시스템은 무엇인가요?

**부산 갈맷길 100M 공식 웹사이트**는 트레일러닝 대회를 위한 통합 관리 시스템입니다.

```
┌─────────────────────────────────────────────────────────────┐
│                    웹사이트 (프론트엔드)                       │
│         GitHub Pages 또는 Vercel에서 무료 호스팅               │
└─────────────────────────────────────────────────────────────┘
                              ↕ API 통신
┌─────────────────────────────────────────────────────────────┐
│              Google Apps Script (백엔드)                      │
│                    무료 서버리스 API                          │
└─────────────────────────────────────────────────────────────┘
                              ↕ 데이터 저장
┌─────────────────────────────────────────────────────────────┐
│            Google 스프레드시트 (데이터베이스)                   │
│              엑셀처럼 쉽게 편집 가능!                          │
└─────────────────────────────────────────────────────────────┘
```

### ⭐ 주요 기능

| 페이지 | 파일명 | 기능 설명 |
|--------|--------|-----------|
| 🏠 홈 | `index.html` | 대회 소개, D-Day 카운트다운, 갤러리 |
| 🗺️ 코스 안내 | `course.html` | 지도, GPX 경로, 고도 프로필 |
| 📅 일정 | `schedule.html` | 대회 타임라인, 컷오프 정보 |
| ✍️ 참가 신청 | `registration.html` | 신청서 작성, 신청현황 조회 |
| 📢 공지사항 | `notices.html` | 아코디언 형태 공지 |
| 👥 커뮤니티 | `community.html` | 카풀/숙소 공유, 게시판 |
| 🏆 결과 조회 | `results.html` | 순위 검색, 완주증 발급 |

### 💰 비용

**모든 것이 무료입니다!**
- GitHub Pages: 무료
- Google Apps Script: 무료
- Google 스프레드시트: 무료

---

## 2. 프로젝트 구조

### 📁 폴더 구조 설명

```
Busan100/
│
├── 📄 index.html          ← 메인 홈페이지
├── 📄 course.html         ← 코스 안내 페이지  
├── 📄 schedule.html       ← 일정 페이지
├── 📄 registration.html   ← 참가 신청 페이지
├── 📄 notices.html        ← 공지사항 페이지
├── 📄 community.html      ← 커뮤니티 페이지
├── 📄 results.html        ← 결과 조회 페이지
│
├── 📄 Code.gs             ← 백엔드 코드 (Apps Script용)
├── 📄 vercel.json         ← Vercel 배포 설정
│
├── 📁 css/
│   └── styles.css         ← 공통 스타일
│
├── 📁 js/
│   ├── app.js             ← 공통 JavaScript 로직
│   └── course-map.js      ← 지도 관련 로직
│
├── 📁 assets/             ← 이미지 파일들
│   ├── logo.png           ← 로고 이미지
│   ├── hero_bg.jpg        ← 메인 배경 이미지
│   ├── gallery_1.jpg      ← 갤러리 이미지 1
│   ├── gallery_2.jpg      ← 갤러리 이미지 2
│   └── certificate_bg.png ← 완주증 배경
│
└── 📁 public/
    └── course.gpx         ← 코스 GPX 파일
```

### 📌 중요 파일 설명

#### `js/app.js` - 핵심 설정 파일

```javascript
// 5번째 줄에서 두 가지 모드 설정 가능

const USE_MOCK = false;  // Mock 모드 설정
// true  = 테스트 데이터 사용 (인터넷 연결 불필요)
// false = 실제 Google 스프레드시트 연동

const API_URL = '실제_앱스크립트_URL';  // 백엔드 주소
```

#### `Code.gs` - 백엔드 코드

```javascript
// 9번째 줄
const SPREADSHEET_ID = '스프레드시트_ID';  // 데이터 저장소 주소
```

---

## 3. 초기 설정 가이드

### 🔰 Step 1: Google 스프레드시트 생성 (5분)

1. **Google Sheets 접속**
   - 브라우저에서 [sheets.google.com](https://sheets.google.com) 열기
   - Google 계정으로 로그인

2. **새 스프레드시트 만들기**
   - 좌측 상단 `+ 빈 스프레드시트` 클릭
   - 이름을 `갈맷길100M_데이터`로 변경

3. **스프레드시트 ID 복사**
   - 브라우저 주소창 확인:
     ```
     https://docs.google.com/spreadsheets/d/여기가_ID입니다/edit
     ```
   - `/d/` 와 `/edit` 사이의 긴 문자열이 ID입니다
   - 📋 이 ID를 메모장에 복사해두세요!

---

### 🔰 Step 2: Apps Script 설정 (10분)

1. **Apps Script 열기**
   - 스프레드시트 상단 메뉴에서:
   - `확장 프로그램` → `Apps Script` 클릭

2. **코드 붙여넣기**
   - 기본으로 열린 `Code.gs` 파일의 내용을 **모두 삭제**
   - 프로젝트의 `Code.gs` 파일 내용을 **전체 복사**
   - Apps Script 편집기에 **붙여넣기**

3. **스프레드시트 ID 설정**
   - 9번째 줄을 찾아서 수정:
   ```javascript
   // 변경 전
   const SPREADSHEET_ID = 'YOUR_SPREADSHEET_ID';
   
   // 변경 후 (실제 ID 입력)
   const SPREADSHEET_ID = '1ABC...실제ID...xyz';
   ```
   - `Ctrl + S` 로 저장

4. **시트 자동 생성**
   - 상단 드롭다운에서 `setupSpreadsheet` 선택
   - ▶️ 실행 버튼 클릭
   - 권한 승인 요청이 나오면:
     - `권한 검토` 클릭
     - Google 계정 선택
     - `고급` → `~로 이동` 클릭
     - `허용` 클릭
   - ✅ 스프레드시트에 9개 시트가 자동 생성됩니다!

---

### 🔰 Step 3: 웹 앱 배포 (5분)

1. **배포 설정**
   - Apps Script 우측 상단: `배포` → `새 배포` 클릭

2. **웹 앱 선택**
   - ⚙️ 유형 선택 옆 톱니바퀴 클릭
   - `웹 앱` 선택

3. **설정 입력**
   | 항목 | 설정값 |
   |------|--------|
   | 설명 | 갈맷길 100M API |
   | 실행 주체 | **나** |
   | 액세스 권한 | **모든 사용자** ⚠️ 중요! |

4. **배포**
   - `배포` 버튼 클릭
   - 권한 승인 (이전과 동일)
   - **웹 앱 URL** 복사! 📋
   ```
   https://script.google.com/macros/s/ABC...XYZ/exec
   ```

---

### 🔰 Step 4: 프론트엔드 연결 (2분)

1. **`js/app.js` 파일 열기**

2. **설정 수정**
   ```javascript
   // 변경 전
   const USE_MOCK = true;
   const API_URL = 'https://script.google.com/macros/s/YOUR_ID/exec';
   
   // 변경 후
   const USE_MOCK = false;
   const API_URL = 'https://script.google.com/macros/s/실제_배포_URL/exec';
   ```

3. **저장** - `Ctrl + S`

---

### 🔰 Step 5: GitHub Pages 배포 (10분)

1. **GitHub 계정 만들기** (없는 경우)
   - [github.com](https://github.com) 접속
   - `Sign up` → 정보 입력 → 이메일 인증

2. **새 저장소 만들기**
   - 우측 상단 `+` → `New repository`
   
   | 항목 | 입력값 |
   |------|--------|
   | Repository name | `busan-100m` |
   | Public/Private | ✅ **Public** |

3. **파일 업로드**
   - `uploading an existing file` 클릭
   - `Busan100` 폴더 **안의 내용물**을 드래그앤드롭
   - ⚠️ 폴더째가 아닌 **안의 파일/폴더들**을 업로드!
   - `Commit changes` 클릭

4. **Pages 활성화**
   - `Settings` → `Pages`
   - Source: `main`, `/ (root)` 선택
   - `Save`

5. **완료!**
   - 1~2분 후 URL 확인:
   ```
   https://[사용자명].github.io/busan-100m/
   ```

---

## 4. 일상 운영 가이드

### 📊 Google 스프레드시트 관리

스프레드시트만 수정하면 웹사이트에 **자동으로 반영**됩니다!

#### 🔧 Config 시트 (기본 설정)

| Key | Value | 설명 |
|-----|-------|------|
| eventDate | 2026-03-01 | 대회 날짜 (yyyy-mm-dd) |
| eventName | 부산 갈맷길 100M | 대회명 |
| registrationOpen | true/false | 신청 오픈 여부 |
| maxParticipants | 500 | 최대 참가 인원 |
| kakaoLink | https://open.kakao.com/... | 카카오톡 오픈채팅 링크 |

**수정 방법:**
1. Config 시트 열기
2. Value 열의 값 수정
3. 즉시 반영! (저장 필요 없음)

---

#### 📢 Notices 시트 (공지사항)

| 열이름 | 필수 | 설명 | 예시 |
|--------|------|------|------|
| id | ✅ | 고유번호 (1, 2, 3...) | 1 |
| date | ✅ | 작성일 | 2026-01-10 |
| title | ✅ | 제목 (이모지 사용 권장) | 🎉 참가신청 오픈! |
| content | ✅ | 내용 (줄바꿈: \n) | 신청이 시작되었습니다. |
| image_url | ❌ | 이미지 URL (선택) | https://... |

**새 공지 추가 방법:**
1. Notices 시트의 마지막 행 아래에 새 행 추가
2. id는 이전 번호 +1
3. 내용 입력 후 즉시 반영

---

#### ⏰ Schedule 시트 (일정)

| 열이름 | 설명 | 예시 |
|--------|------|------|
| id | 고유번호 | 1 |
| time | 시간 | 15:00 |
| title | 일정명 | 접수 개시 |
| location | 장소 | 다대포해수욕장 |
| icon | 이모지 | 📋 |

---

#### 📍 Checkpoints 시트 (체크포인트)

| 열이름 | 설명 | 예시 |
|--------|------|------|
| id | 고유번호 | 1 |
| name | 체크포인트명 | CP1 화명생태공원 |
| km | 거리(km) | 20 |
| cutoff | 컷오프 시간 | 19:00 |
| lat | 위도 | 35.2103 |
| lon | 경도 | 129.0156 |

---

#### 💬 Cheers 시트 (응원 메시지)

| 열이름 | 설명 |
|--------|------|
| message | 응원 메시지 내용 |
| name | 작성자 이름 |
| timestamp | 작성 시간 |

> ⚡ 30초마다 자동 새로고침되어 실시간 표시됩니다!

---

## 5. 콘텐츠 관리

### 🖼️ 이미지 변경하기

#### 로고 변경
1. 새 로고 이미지 준비 (권장: 500x500px, PNG)
2. 파일명을 `logo.png`로 변경
3. `assets/` 폴더의 기존 파일 덮어쓰기
4. GitHub에 업로드 → 자동 반영

#### 배경 이미지 변경
- `assets/hero_dark_bg.jpg` - 메인 페이지 배경
- 파일 교체 후 GitHub 업로드

#### 갤러리 이미지 추가
1. 새 이미지를 `assets/` 폴더에 추가
2. `index.html` 파일에서 갤러리 섹션 수정

---

### 📝 페이지 텍스트 수정

#### 간단한 텍스트 수정 (GitHub에서 직접)

1. GitHub 저장소 페이지 접속
2. 수정할 파일 클릭 (예: `index.html`)
3. ✏️ 연필 아이콘 클릭
4. 텍스트 수정
5. `Commit changes` 클릭
6. 1~2분 후 자동 반영

#### 수정 가능한 부분 예시

```html
<!-- index.html 에서 대회명 변경 -->
<h1 class="main-title">부산 갈맷길 100M</h1>

<!-- 설명 텍스트 변경 -->
<p class="hero-description">
    3.1절을 기념하여... 여기 텍스트 수정
</p>
```

---

### 🗺️ GPX 코스 파일 변경

1. 새 GPX 파일 준비
2. 파일명을 `course.gpx`로 변경
3. `public/` 폴더의 기존 파일 교체
4. GitHub 업로드

---

## 6. 대회 당일 운영

### 📋 체크리스트

**D-7 (일주일 전)**
- [ ] 참가자 명단 확인 (Registrations 시트)
- [ ] 공지사항 최종 업데이트
- [ ] 체크포인트 정보 확인

**D-1 (하루 전)**
- [ ] 응원 메시지 게시판 초기화/정리
- [ ] 날씨 정보 업데이트
- [ ] 긴급 연락처 확인

**D-Day (당일)**
- [ ] 실시간 응원 메시지 모니터링
- [ ] SOS 긴급 신호 모니터링 (Emergency 시트)
- [ ] 결과 입력 준비

**D+1 (다음날)**
- [ ] Results 시트에 결과 입력
- [ ] 완주증 발급 테스트

---

### 🏆 결과 입력 방법

1. **Results 시트** 열기
2. 아래 형식으로 입력:

| bib | name | phone_last4 | course | time | rank |
|-----|------|-------------|--------|------|------|
| 001 | 김철수 | 1234 | 100M | 12:34:56 | 1 |
| 002 | 이영희 | 5678 | 100M | 13:45:23 | 2 |

> ⚠️ `phone_last4`는 휴대폰 뒷자리 4자리 (본인 확인용)

---

### 🆘 SOS 긴급 신호 모니터링

참가자가 SOS 버튼을 누르면 **Emergency 시트**에 자동 기록됩니다:

| timestamp | lat | lon | status |
|-----------|-----|-----|--------|
| 2026-03-01 18:30:45 | 35.2103 | 129.0156 | pending |

**대응 절차:**
1. Emergency 시트 주기적 확인 (5~10분 간격)
2. 새로운 SOS 발생시 즉시 확인
3. 위도/경도로 Google 지도에서 위치 확인:
   ```
   https://www.google.com/maps?q=35.2103,129.0156
   ```
4. 구조 후 status를 `resolved`로 변경

---

## 7. 문제 해결 (FAQ)

### ❓ 웹사이트가 안 열려요

| 증상 | 해결책 |
|------|--------|
| 404 에러 | `index.html`이 저장소 루트에 있는지 확인 |
| 스타일 깨짐 | `css/` 폴더가 업로드되었는지 확인 |
| 이미지 안 보임 | `assets/` 폴더 업로드 확인 |

---

### ❓ 데이터가 안 불러와져요

| 증상 | 해결책 |
|------|--------|
| 공지사항이 안 보여요 | 1. `USE_MOCK = false` 확인<br>2. API_URL이 정확한지 확인<br>3. 스프레드시트에 데이터가 있는지 확인 |
| CORS 에러 | Apps Script 배포 시 "모든 사용자" 선택했는지 확인 |
| 권한 에러 | 배포 시 "액세스 승인" 완료했는지 확인 |

---

### ❓ 스프레드시트 연결 테스트

브라우저에서 직접 API 호출해서 확인:
```
https://script.google.com/macros/s/YOUR_ID/exec?action=getConfig
```

정상이면 JSON 데이터가 표시됩니다.

---

### ❓ Mock 모드로 테스트하고 싶어요

`js/app.js` 파일에서:
```javascript
const USE_MOCK = true;  // false → true로 변경
```

> Mock 모드에서는 인터넷 없이도 테스트 데이터로 작동합니다.

---

### ❓ 앱스크립트 수정 후 반영이 안 돼요

코드 수정 후 **재배포**가 필요합니다:
1. `배포` → `배포 관리`
2. ✏️ 연필 아이콘 클릭
3. 버전을 `새 버전`으로 변경
4. `배포` 클릭

---

## 8. 긴급 상황 대응

### 🔥 웹사이트가 갑자기 안 될 때

**즉시 확인 사항:**
1. GitHub Pages 상태: [githubstatus.com](https://www.githubstatus.com/)
2. Google 서비스 상태: [status.cloud.google.com](https://status.cloud.google.com/)

**임시 대응:**
```javascript
// js/app.js에서 Mock 모드 활성화
const USE_MOCK = true;
```
→ 실제 데이터 없이도 기본 기능 작동

---

### 📞 주요 연락처

| 담당 | 연락처 | 역할 |
|------|--------|------|
| 운영 총괄 | 010-xxxx-xxxx | 전체 운영 |
| 기술 담당 | 010-xxxx-xxxx | 웹사이트/기술 문제 |
| 안전 담당 | 010-xxxx-xxxx | SOS 대응 |

---

### 🔄 Backend 업데이트 시 주의사항

1. **반드시 테스트 먼저**
   - Mock 모드로 프론트엔드 테스트
   - 별도 스프레드시트로 백엔드 테스트

2. **배포 전 백업**
   - 스프레드시트 전체 복사본 만들기
   - 파일 → 사본 만들기

3. **단계적 배포**
   - 소수 인원으로 먼저 테스트
   - 문제 없으면 전체 공개

---

## 📱 모바일 기능 안내

### 🗺️ 지도 컨트롤

코스 페이지(`course.html`)의 지도에는 터치 친화적인 컨트롤 버튼이 있습니다:

| 버튼 | 기능 | 설명 |
|------|------|------|
| **+** | 확대 | 지도를 한 단계 확대합니다 |
| **−** | 축소 | 지도를 한 단계 축소합니다 |
| **⛶** | 전체 보기 | 전체 코스가 보이도록 지도를 조정합니다 |

> 💡 **모바일 팁**: 손가락 두 개로 핀치 줌도 사용할 수 있습니다!

### 📱 모바일 최적화 기능

1. **하단 내비게이션 바**
   - 모바일에서 하단에 고정된 메뉴가 표시됩니다
   - 홈, 코스, 일정, 신청, 결과 빠른 접근

2. **위치 공유 버튼**
   - 화면 우측 하단의 `◎` 버튼
   - 현재 위치를 카카오톡으로 공유할 수 있습니다

3. **내비게이션 모드**
   - 코스 페이지에서 "🧭 내비게이션 시작" 버튼
   - 실시간 GPS 위치 추적
   - 다음 체크포인트까지 거리/고도 표시
   - 경로 이탈 시 경고 알림

4. **반응형 레이아웃**
   - 화면 크기에 따라 자동으로 레이아웃 조정
   - 작은 화면에서는 버튼이 세로로 정렬
   - 터치하기 쉬운 크기의 버튼

---

## 📱 부록: 테스트 계정 정보

| 기능 | 이름 | 휴대폰 뒷자리 |
|------|------|---------------|
| 신청현황 조회 | 김철수 | 1234 |
| 결과/완주증 조회 | 김철수 | 1234 |

---

## 📌 빠른 참조 링크

| 서비스 | URL |
|--------|-----|
| GitHub | https://github.com |
| Google Sheets | https://sheets.google.com |
| Apps Script | https://script.google.com |
| Google 지도 | https://maps.google.com |

---

> 💡 **도움이 필요하신가요?**
> 
> 이 문서로 해결되지 않는 문제가 있다면 기술 담당자에게 문의해주세요.
> 
> 문의 시 다음 정보를 함께 알려주세요:
> - 문제가 발생한 페이지/기능
> - 에러 메시지 (있는 경우)
> - 마지막으로 정상 작동한 시점

---

**📅 문서 버전 이력**

| 버전 | 날짜 | 변경 내용 |
|------|------|-----------|
| 1.0 | 2026-01-10 | 최초 작성 |
